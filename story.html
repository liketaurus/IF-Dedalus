<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Пришли с миром</title>

	<script src="https://olado.github.io/doT/doT.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script src="dedalus.js"></script>
	<script src="dedalus-web.js"></script>

	<link rel="stylesheet" href="themes/allyann/story.css">

</head>

<body>
	<div id="story">
	

		<initscript>
		</initscript>

		<beforeEveryThing>
		</beforeEveryThing>

		<beforeEveryPageTurn>
		</beforeEveryPageTurn>

		<beforeEveryParagraphShown>
		</beforeEveryParagraphShown>

		<afterEveryThing>
		</afterEveryThing>

		<afterEveryPageTurn>
		</afterEveryPageTurn>

		<afterEveryParagraphShown>
		</afterEveryParagraphShown>

		<!-- Novel -->
        	<title>Пришли с миром</title>

		

		<!-- Objects -->
		<obj id="obj1" inventoryName="Пугач">
			<action id="Examine">
				На волне общего настроения Ваша рука словно сама собой достает из под полы плаща самодельный пугач, 
                который в свое время смастерили для стрельбы по птицам, да и самозащиты тоже. 
			</action>

			<action id="Get">
				<when>!story.isInInventory('dbj1)</when>
				Вы достаете пугач и стрелляете!
				{{ story.putInInventory('obj1'); }}
			</action>

		</obj>

		<!-- Pages -->
		
        <page id="intro">
			<p><strong>- Мы пришли с миром!</strong> - пискнуло Существо.
            <br>По толпе снова пробежал ропот.</p>
            <p>Оно чем-то напоминало человека. Одежкой, может? 
            Перемещалось, правда, на четвереньках. 
            Ничего инопланетного с виду, скорее еще одно порождение постядерного бытия. 
            Но вышло оно из портала посреди новой Москвы и назвалось инопланетянином.</p>
            
        </page>
        <page id="p2" class="first">
            <p>Я стою в толпе и встречаюсь с Существом взглядом. Живое, псионикой чую, 
            но псионики в нем - нет.</p>
            <p>Эти ребята живут где-то далеко, но сумели пристыковаться к нашей портальной сети. 
            И теперь предлагали дружить. Ну, то есть вообще. Мол, вы к нам, а мы к вам. 
            Народ, стоящий на площади, в добрых пришельцев почему-то не верит. 
            Отдельные голоса над толпой предлагают познакомиться с тушкой пришельца поближе. 
            В смысле <interact with="obj1">пальнуть на всякий случай</interact>, а уже потом знакомиться. 
            </p>
            
            <paragraph id="p1">
				Seiously, What did you expect?
			</paragraph>
		</page>
		
        
        <!-- <page id="intro">
			You are about to experience the most amazing empty story ever...
		</page> -->

		<!-- <page id="dummyPage" class="first">
			You are in an empty page except for a <show paragraph="dummyParagraph">paragraph</show>.

			<p>Quite unsurprisingly, there is even an <interact with="dummyObject">object</interact> lying around.</p>

			<p>Looking around with more attention, you notice <turn to="otherPage">another page</turn>
			</p>

			<paragraph id="dummyParagraph">
				Seiously, What did you expect?
			</paragraph>
		</page> -->

		<page id="otherPage">
			Plot twist! The story ends abruptly.
			{{ story.endGame(); }}
		</page>

	</div>

	<div id="wrapper">
		<div id="title"></div>

		<div id="inventoryHostWrapper">
			<h2>Инвентарь</h2>
			<div id="inventoryHost"></div>
		</div>

		<div id="host"></div>
	</div>

	<div id="interactionHost"></div>

	<div id="undoStageHost"></div>

	<div id="footer">
		<a id="undoHost" href="#">Отмена</a> &bull; <a id="saveHost" href="#">Сохранить</a> &bull; <a id="restoreHost"
			href="#">Восстановить</a> &bull; <a id="reseteHost" href="#">Сбросить</a>
	</div>

	<script>
		$(function () {
            new DedalusWeb({
                domSource         : $('#story'),
                domTarget         : $('#host'),
                titleTarget       : $('#title'),
                inventoryTarget   : $('#inventoryHost'),
                interactionTarget : $('#interactionHost'),
                undoTarget        : $('#undoHost'),
                undoStageTarget   : $('#undoStageHost'),
                saveTarget        : $('#saveHost'),
                restoreTarget     : $('#restoreHost'),
                resetTarget       : $('#reseteHost'),
            });
        });

	</script>
</body>

</html>